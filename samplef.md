```uml
@startuml
opt 未登録
ユーザー->webサーバー:ユーザー登録
webサーバー->DBサーバー:ユーザー登録
DBサーバー->DBサーバー:登録処理
DBサーバー->webサーバー:登録結果
 alt 登録成功
  webサーバー->ユーザー:登録メッセージを表示
 else 登録失敗
  webサーバー->ユーザー:失敗メッセージを表示
 end
end


ユーザー->webサーバー:ログイン
webサーバー->DBサーバー:ログイン照会
DBサーバー->DBサーバー:ログイン処理
DBサーバー->webサーバー:認証結果

alt 認証成功
 webサーバー->ユーザー:ユーザー名を表示
else 認証失敗
 webサーバー->ユーザー:失敗メッセージを表示
end

ユーザー->webサーバー:商品検索
webサーバー->DBサーバー:検索処理
DBサーバー->DBサーバー:検索処理
DBサーバー->webサーバー:検索結果
webサーバー->ユーザー:検索結果

ユーザー->webサーバー:商品詳細表示
webサーバー->DBサーバー:詳細表示処理
DBサーバー->DBサーバー:詳細表示処理
DBサーバー->webサーバー:処理結果
webサーバー->ユーザー:処理結果

ユーザー->webサーバー:商品一覧表示
webサーバー->DBサーバー:一覧表示処理
DBサーバー->DBサーバー:一覧表示処理
DBサーバー->webサーバー:処理結果
webサーバー->ユーザー:処理結果

ユーザー->webサーバー:ショッピングカート表示
webサーバー->DBサーバー:カート内表示処理
DBサーバー->DBサーバー:カート内表示処理
DBサーバー->webサーバー:処理結果
alt 商品あり
webサーバー->ユーザー:検索結果
else 商品なし
webサーバー->ユーザー:商品なしと表示
end

opt ログイン中
ユーザー->webサーバー:ログアウト
webサーバー->DBサーバー:ログアウト照会
DBサーバー->DBサーバー:ログアウト処理
DBサーバー->webサーバー:ログアウト結果
webサーバー->ユーザー:ログアウト結果
end

activate ユーザー
@enduml
```
